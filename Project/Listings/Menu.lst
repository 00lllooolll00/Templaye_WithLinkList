C51 COMPILER V9.60.7.0   MENU                                                              03/31/2025 21:00:20 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MENU
OBJECT MODULE PLACED IN .\Objects\Menu.obj
COMPILER INVOKED BY: D:\Keli5\C51\BIN\C51.EXE ..\User\Src\Menu.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\User\Inc;..\Driver\I
                    -nc;.\SYS) DEBUG OBJECTEXTEND PRINT(.\Listings\Menu.lst) OBJECT(.\Objects\Menu.obj)

line level    source

   1          #include "Menu.h"
   2          
   3          /**
   4           * @brief 注册一个界面
   5           * 
   6           * @param pmenu 对应界面的指针
   7           * @param id 界面ID 0xAB    A：主级数   B：次级数
   8           * @param pfunc 该界面显示的相关函数
   9           * @param parent 父级界面
  10           * @param child 子级界面
  11           * @param next 同级下一个界面
  12           * @param prev 同级上一个界面
  13           */
  14          void Menu_Add(menu_node_t *pmenu,
  15                        uint8_t id,
  16                        menu_update_func_t pfunc,
  17                        menu_node_t *parent,
  18                        menu_node_t *child,
  19                        menu_node_t *next,
  20                        menu_node_t *prev)
  21          {
  22   1          pmenu->menu_id = id;
  23   1          pmenu->menu_func = pfunc;
  24   1          pmenu->menu_parent = parent;
*** WARNING C182 IN LINE 24 OF ..\User\Src\Menu.c: pointer to different objects
  25   1          pmenu->menu_child = child;
*** WARNING C182 IN LINE 25 OF ..\User\Src\Menu.c: pointer to different objects
  26   1          pmenu->menu_next = next;
*** WARNING C182 IN LINE 26 OF ..\User\Src\Menu.c: pointer to different objects
  27   1          pmenu->menu_prev = prev;
*** WARNING C182 IN LINE 27 OF ..\User\Src\Menu.c: pointer to different objects
  28   1      }
  29          
  30          /**
  31           * @brief 切换到下一个同级菜单
  32           * 
  33           * @details 将当前菜单指针移动到下一个同级菜单，并更新显示
  34           */
  35          void Menu_MoveNext(void)
  36          {
  37   1          if (current_menu && current_menu->menu_next)
  38   1          {
  39   2              current_menu = current_menu->menu_next; // 切换到下一个菜单
*** WARNING C182 IN LINE 39 OF ..\User\Src\Menu.c: pointer to different objects
  40   2          }
  41   1      }
  42          
  43          /**
  44           * @brief 切换到上一个同级菜单
  45           * 
  46           * @details 将当前菜单指针移动到上一个同级菜单，并更新显示
  47           */
  48          void Menu_MovePrev(void)
  49          {
C51 COMPILER V9.60.7.0   MENU                                                              03/31/2025 21:00:20 PAGE 2   

  50   1          if (current_menu && current_menu->menu_prev)
  51   1          {
  52   2              current_menu = current_menu->menu_prev; // 切换到上一个菜单
*** WARNING C182 IN LINE 52 OF ..\User\Src\Menu.c: pointer to different objects
  53   2          }
  54   1      }
  55          
  56          /**
  57           * @brief 进入子菜单
  58           * 
  59           * @details 如果当前菜单有子菜单，则进入子菜单并更新显示
  60           */
  61          void Menu_MoveChild(void)
  62          {
  63   1          while (current_menu->menu_prev) //只有在最高级的界面才可以进入下一个级别的界面
  64   1          {
  65   2              Menu_MovePrev();
  66   2          }
  67   1          if (current_menu && current_menu->menu_child)
  68   1          {
  69   2              current_menu = current_menu->menu_child; // 进入子菜单
*** WARNING C182 IN LINE 69 OF ..\User\Src\Menu.c: pointer to different objects
  70   2          }
  71   1      }
  72          
  73          /**
  74           * @brief 返回父菜单
  75           * 
  76           * @details 如果当前菜单有父菜单，则返回父菜单并更新显示
  77           */
  78          void Menu_MoveParent(void)
  79          {
  80   1          while (current_menu->menu_prev)
  81   1          {
  82   2              Menu_MovePrev();
  83   2          }
  84   1          if (current_menu && current_menu->menu_parent)
  85   1          {
  86   2              current_menu = current_menu->menu_parent; // 返回父菜单
*** WARNING C182 IN LINE 86 OF ..\User\Src\Menu.c: pointer to different objects
  87   2          }
  88   1      }
  89          
  90          /**
  91           * @brief 更新当前菜单显示
  92           * 
  93           * @details 调用当前菜单的更新函数，刷新显示缓冲区内容
  94           *          此函数应定期被任务调度器调用，以保持显示内容的实时性
  95           */
  96          void Menu_Update(void)
  97          {
  98   1          if (current_menu && current_menu->menu_func)
  99   1          {
 100   2              current_menu->menu_func(); // 调用当前菜单的更新函数
 101   2          }
 102   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    386    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V9.60.7.0   MENU                                                              03/31/2025 21:00:20 PAGE 3   

   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      19
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  8 WARNING(S),  0 ERROR(S)
