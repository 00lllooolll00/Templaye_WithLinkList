C51 COMPILER V9.60.7.0   ULTRASONIC                                                        04/06/2025 01:40:29 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE ULTRASONIC
OBJECT MODULE PLACED IN .\Objects\Ultrasonic.obj
COMPILER INVOKED BY: D:\Keli5\C51\BIN\C51.EXE ..\Driver\Src\Ultrasonic.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\User\Inc;..\
                    -Driver\Inc;.\SYS) DEBUG OBJECTEXTEND PRINT(.\Listings\Ultrasonic.lst) OBJECT(.\Objects\Ultrasonic.obj)

line level    source

   1          #include "Ultrasonic.h"
   2          
   3          /**
   4           * @brief 12usÂª∂Êó∂ ‰∏∫Ë∂ÖÂ£∞Ê≥¢ÂèëÁîüÊèê‰æõÊñπÊ≥¢
   5           * 
   6           */
   7          void Delay12us(void)    //@12.000MHz
   8          {
   9   1              unsigned char data i;
  10   1      
  11   1              _nop_();
  12   1              _nop_();
  13   1              i = 33;
  14   1              while (--i);
  15   1      }
  16          
  17          /**
  18           * @brief ÂèëÈÄÅ8Ê¨°40KhzÁöÑÊñπÊ≥¢
  19           * 
  20           */
  21          void Ul_Wave(void)
  22          {
  23   1          uint8_t i;
  24   1          for(i = 0; i < 8; i ++)
  25   1          {
  26   2              Tx = 1;
  27   2              Delay12us();
  28   2              Tx = 0;
  29   2              Delay12us();
  30   2          }
  31   1      }
  32          
  33          /**
  34           * @brief ËØªÂèñË∑ùÁ¶ª
  35           * 
  36           * 
  37           * @return ËøîÂõûË∑ùÁ¶ª
  38           * @note ‰ΩøÁî®PCAÊù•ÊµãË∑ù
  39           */
  40          uint8_t Distance_Get(void)
  41          {
  42   1          uint16_t time;
  43   1          CH = CL = 0;//PCAÁöÑÈ´ò‰ΩéËÆ°Êï∞Âô®ËÆæÁΩÆ‰∏∫0
  44   1          CMOD = 0x00;//ËÆæÁΩÆPCAÊ®°Âºè‰∏∫ÂÆöÊó∂Ê®°Âºè
  45   1      
  46   1          Ul_Wave();//ÂèëÈÄÅÊñπÊ≥¢
  47   1      
  48   1          CR = 1;//PCAÂºÄÂßãËÆ°Êó∂
  49   1          while(Rx && !CF);//Â¶ÇÊûúRxÈùû0ËØ¥ÊòéÊé•Êî∂Âà∞Êï∞ÊçÆÔºåË∑≥Âá∫Âæ™ÁéØ„ÄÇÊàñËÄÖCFÁΩÆ1ÔºåË°®Á§∫PCAÊ∫¢Âá∫Ôº
             -åËØÅÊòéÊµãÈáèÂ∑≤ÁªèÊ∫¢Âá∫‰∫ÜÔºå‰πüË¶ÅË∑≥Âá∫Âæ™ÁéØ„ÄÇ
  50   1          CR = 0;//PCAÂÅúÊ≠¢ËÆ°Êó∂
  51   1      
  52   1          if(!CF)//Â¶ÇÊûúCFÊ≤°ÊúâÁΩÆ1ÔºåËØ¥ÊòéÊ≤°ÊúâÊ∫¢Âá∫ÔºåÊ≠£Â∏∏ËÆ°ÁÆóÊï∞ÊçÆÁÑ∂ÂêéËøîÂõû
  53   1          {
C51 COMPILER V9.60.7.0   ULTRASONIC                                                        04/06/2025 01:40:29 PAGE 2   

  54   2              time = CH << 8 | CL;//ÂÖàËÆ°ÁÆóÂæóÂà∞Êó∂Èó¥ÔºåÁî±Êó∂Èó¥ËÆ°ÁÆóÂæóÂà∞‰∏ãÈù¢ÁöÑË∑ùÁ¶ª
  55   2              return (0.017 * time);
  56   2          }
  57   1          else//Â¶ÇÊûúCFÁΩÆ1‰∫ÜÔºå‰ª£Ë°®Ê∫¢Âá∫ÔºåÊ∏ÖÈô§CFÁöÑÊ†áÂøó‰ΩçÂπ∂‰∏îËøîÂõû0
  58   1          {
  59   2              CF = 0;
  60   2              return 0;
  61   2          }
  62   1      
  63   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     80    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
